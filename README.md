# ğŸ¨ AI Image Editor - AI é©±åŠ¨çš„æ™ºèƒ½å›¾åƒç¼–è¾‘å™¨

AI Image Editor æ˜¯ä¸€ä¸ªåŸºäº Vercel çš„ç°ä»£åŒ– AI å›¾åƒç¼–è¾‘å¹³å°ï¼Œé›†æˆäº† Google Vertex AI Gemini 2.5 Flash Image Preview æ¨¡å‹ï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„å›¾åƒç¼–è¾‘ã€åˆ†æå’Œç”Ÿæˆä½“éªŒã€‚

<div align="center">
  <img src="https://img.shields.io/badge/Vercel-000000?style=for-the-badge&logo=vercel&logoColor=white" alt="Vercel" />
  <img src="https://img.shields.io/badge/Vertex_AI-Gemini_2.5-blue?style=for-the-badge&logo=google" alt="Vertex AI" />
  <img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white" alt="TypeScript" />
  <img src="https://img.shields.io/badge/Fabric.js-Canvas-red?style=for-the-badge" alt="Fabric.js" />
</div>

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– Vertex AI é›†æˆ
- é›†æˆ Google Vertex AI Gemini 2.5 Flash Image Preview æ¨¡å‹
- æ”¯æŒå›¾åƒç¼–è¾‘ã€åˆ†æå’Œç”Ÿæˆä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½
- ä¸¥æ ¼æ¨¡å¼é…ç½®ï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çœŸå® AI æœåŠ¡
- æ™ºèƒ½é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„é…ç½®æŒ‡å¯¼

### ğŸ–¼ï¸ AI å›¾åƒå¤„ç†
- **å›¾åƒç¼–è¾‘**: AI é©±åŠ¨çš„å›¾åƒå¢å¼ºå’Œä¿®æ”¹
- **å›¾åƒåˆ†æ**: æ™ºèƒ½å›¾åƒå†…å®¹åˆ†æå’Œæè¿°
- **å›¾åƒç”Ÿæˆ**: åŸºäºæ–‡æœ¬æç¤ºçš„å›¾åƒåˆ›å»º
- æ”¯æŒå¤šç§å›¾åƒæ ¼å¼å’Œé«˜è´¨é‡è¾“å‡º

### ğŸ¨ ä¸“ä¸šç”»å¸ƒç¼–è¾‘å™¨
- åŸºäº Fabric.js çš„é«˜æ€§èƒ½ç”»å¸ƒå¼•æ“
- æ”¯æŒå¤šé€‰å¯¹è±¡ã€æ¡†é€‰ã€æ‹–æ‹½ç­‰äº¤äº’æ“ä½œ
- æ™ºèƒ½å›¾ç‰‡å°ºå¯¸é€‚é…ï¼Œä¿æŒåŸå§‹æ¯”ä¾‹
- ä¸°å¯Œçš„ç¼–è¾‘å·¥å…·å’Œå›¾å±‚ç®¡ç†

### ğŸ’¬ AI èŠå¤©åŠ©æ‰‹
- å³ä¾§æµ®åŠ¨ AI èŠå¤©é¢æ¿
- æ”¯æŒå›¾åƒä¸Šä¼ å’Œ AI åˆ†æ
- å®æ—¶å¯¹è¯å’Œæ™ºèƒ½å»ºè®®
- å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰

### ğŸ”’ ä¸¥æ ¼æ¨¡å¼é…ç½®
- è¦æ±‚æ­£ç¡®é…ç½® Vertex AI ç¯å¢ƒå˜é‡
- æœªé…ç½®æ—¶ç›´æ¥æŠ¥é”™ï¼Œä¸ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼
- ç¡®ä¿ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çœŸå® AI æœåŠ¡
- å‹å¥½çš„é”™è¯¯æç¤ºå’Œé…ç½®æŒ‡å¯¼

## ğŸš€ æŠ€æœ¯æ¶æ„

- **åç«¯**: Vercel Serverless Functions + API Routes
- **å‰ç«¯**: åŸç”Ÿ TypeScript + Fabric.js
- **AI æœåŠ¡**: Google Vertex AI Gemini 2.5 Flash Image Preview
- **ç”»å¸ƒå¼•æ“**: Fabric.js
- **éƒ¨ç½²å¹³å°**: Vercel

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒé…ç½®

1. å…‹éš†é¡¹ç›®ï¼š
```bash
git clone https://github.com/your-username/image-editor.git
cd image-editor
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

**å¿…éœ€çš„ Vertex AI é…ç½®**:
```bash
GOOGLE_CLOUD_PROJECT=your-google-cloud-project-id
GOOGLE_CLOUD_LOCATION=global
GOOGLE_SERVICE_ACCOUNT_KEY={"type":"service_account",...}
JWT_SECRET=your-jwt-secret-key
```

**å¯é€‰é…ç½®**:
```bash
REPLICATE_API_TOKEN=your-replicate-api-token
```

4. è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

5. è®¿é—®åº”ç”¨ï¼š
```
http://localhost:3000/image-editor
```

> **âš ï¸ é‡è¦æç¤º**: é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¿…é¡»æ­£ç¡®é…ç½® Vertex AI ç¯å¢ƒå˜é‡æ‰èƒ½ä½¿ç”¨ AI åŠŸèƒ½ã€‚æœªé…ç½®æ—¶ä¼šæ˜¾ç¤ºé…ç½®é”™è¯¯ä¿¡æ¯ã€‚

### éƒ¨ç½²

#### Vercel éƒ¨ç½²
```bash
# é¦–æ¬¡éƒ¨ç½²
vercel

# ç”Ÿäº§éƒ¨ç½²
npm run deploy
```

## ğŸ”§ é…ç½®è¯´æ˜

### Vertex AI é…ç½®ï¼ˆå¿…éœ€ï¼‰

é¡¹ç›®ä½¿ç”¨ Google Vertex AI Gemini 2.5 Flash Image Preview æ¨¡å‹ã€‚é…ç½®æ­¥éª¤ï¼š

1. **åˆ›å»º Google Cloud é¡¹ç›®**
   - è®¿é—® [Google Cloud Console](https://console.cloud.google.com/)
   - åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
   - å¯ç”¨ Vertex AI API

2. **åˆ›å»ºæœåŠ¡è´¦å·**
   - åœ¨ IAM & Admin > Service Accounts ä¸­åˆ›å»ºæœåŠ¡è´¦å·
   - åˆ†é…ä»¥ä¸‹æƒé™ï¼š
     - `Vertex AI User`
     - `AI Platform Developer`
   - ä¸‹è½½æœåŠ¡è´¦å·å¯†é’¥ JSON æ–‡ä»¶

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   GOOGLE_CLOUD_PROJECT=your-project-id
   GOOGLE_CLOUD_LOCATION=global
   GOOGLE_SERVICE_ACCOUNT_KEY={"type":"service_account",...}
   ```

### Vercel ç¯å¢ƒå˜é‡é…ç½®

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥ Vercel Dashboard
2. é€‰æ‹©é¡¹ç›® > Settings > Environment Variables
3. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š
   - `GOOGLE_CLOUD_PROJECT`
   - `GOOGLE_CLOUD_LOCATION`
   - `GOOGLE_SERVICE_ACCOUNT_KEY`
   - `JWT_SECRET`

### å¯é€‰æœåŠ¡

- **Replicate API**: ç”¨äºé¢å¤–çš„å›¾åƒç”ŸæˆåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

## ğŸ“š API æ–‡æ¡£

### å›¾åƒç¼–è¾‘ API

#### POST `/api/ai/image/edit`
AI å›¾åƒç¼–è¾‘å’Œå¢å¼º

**è¯·æ±‚ä½“**:
```json
{
  "imageData": "data:image/jpeg;base64,...",
  "instruction": "Make this image brighter and more colorful",
  "model": "gemini-2.5-flash-image-preview"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "editedImageUrl": "data:image/jpeg;base64,...",
    "textResponse": "AI å¤„ç†è¯´æ˜",
    "provider": "vertex-ai",
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

### å›¾åƒåˆ†æ API

#### POST `/api/ai/image/analyze`
AI å›¾åƒå†…å®¹åˆ†æ

**è¯·æ±‚ä½“**:
```json
{
  "imageData": "data:image/jpeg;base64,...",
  "prompt": "Describe this image in detail"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "analysis": "è¯¦ç»†çš„å›¾åƒåˆ†æç»“æœ",
    "provider": "vertex-ai",
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

### å›¾åƒç”Ÿæˆ API

#### POST `/api/ai/image/generate`
åŸºäºæ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒ

**è¯·æ±‚ä½“**:
```json
{
  "prompt": "A beautiful sunset over mountains",
  "model": "gemini-2.5-flash-image-preview",
  "width": 1024,
  "height": 1024
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "imageUrl": "data:image/jpeg;base64,...",
    "provider": "vertex-ai",
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- **å›¾åƒç¼–è¾‘**: AI é©±åŠ¨çš„å›¾åƒå¢å¼ºã€ä¿®å¤å’Œä¼˜åŒ–
- **å†…å®¹åˆ†æ**: æ™ºèƒ½å›¾åƒå†…å®¹è¯†åˆ«å’Œæè¿°
- **åˆ›æ„ç”Ÿæˆ**: åŸºäºæ–‡æœ¬æè¿°ç”ŸæˆåŸåˆ›å›¾åƒ
- **è®¾è®¡å·¥ä½œæµ**: é›†æˆåˆ°è®¾è®¡æµç¨‹ä¸­çš„ AI åŠ©æ‰‹
- **æ•™è‚²åŸ¹è®­**: AI å›¾åƒå¤„ç†æŠ€æœ¯å­¦ä¹ å’Œå®è·µ
- **åŸå‹å¼€å‘**: å¿«é€ŸéªŒè¯å›¾åƒå¤„ç†æƒ³æ³•

## ğŸ® åŠŸèƒ½æ¼”ç¤º

### åŸºæœ¬æ“ä½œæµç¨‹

1. **æ‰“å¼€ç¼–è¾‘å™¨**: è®¿é—® `/image-editor` é¡µé¢
2. **ä¸Šä¼ å›¾åƒ**: ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æˆ–æ‹–æ‹½å›¾åƒåˆ°ç”»å¸ƒ
3. **AI åˆ†æ**: å³ä¾§èŠå¤©é¢æ¿ä¼šè‡ªåŠ¨åˆ†æå›¾åƒå†…å®¹
4. **ç¼–è¾‘æ“ä½œ**:
   - ä½¿ç”¨ç”»å¸ƒå·¥å…·è¿›è¡ŒåŸºæœ¬ç¼–è¾‘
   - é€šè¿‡ AI èŠå¤©è¿›è¡Œæ™ºèƒ½ç¼–è¾‘
   - å¤šé€‰å¯¹è±¡è¿›è¡Œæ‰¹é‡æ“ä½œ
5. **AI å¢å¼º**: ç‚¹å‡» AI å¢å¼ºæŒ‰é’®åº”ç”¨æ™ºèƒ½ä¼˜åŒ–
6. **ä¿å­˜ç»“æœ**: å¯¼å‡ºç¼–è¾‘åçš„å›¾åƒ

### ç”»å¸ƒæ“ä½œ

- **é€‰æ‹©**: å•å‡»é€‰æ‹©å¯¹è±¡ï¼ŒCtrl+ç‚¹å‡»å¤šé€‰
- **ç§»åŠ¨**: æ‹–æ‹½å¯¹è±¡åˆ°æ–°ä½ç½®
- **ç¼©æ”¾**: æ‹–æ‹½è§’è½æ§åˆ¶ç‚¹è°ƒæ•´å¤§å°
- **æ¡†é€‰**: æŒ‰ä½é¼ æ ‡æ‹–æ‹½æ¡†é€‰å¤šä¸ªå¯¹è±¡
- **åˆ é™¤**: é€‰ä¸­å¯¹è±¡åæŒ‰ Delete é”®

### AI èŠå¤©åŠŸèƒ½

- **å›¾åƒä¸Šä¼ **: ç›´æ¥æ‹–æ‹½å›¾åƒåˆ°èŠå¤©æ¡†
- **æ™ºèƒ½åˆ†æ**: AI è‡ªåŠ¨åˆ†æå›¾åƒå†…å®¹å’Œç‰¹å¾
- **ç¼–è¾‘å»ºè®®**: è·å–ä¸“ä¸šçš„å›¾åƒç¼–è¾‘å»ºè®®
- **å®æ—¶å¯¹è¯**: ä¸ AI è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/AmazingFeature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add some AmazingFeature'`
4. æ¨é€åˆ°åˆ†æ”¯: `git push origin feature/AmazingFeature`
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ Vertex AI é›†æˆï¼š

```bash
node test-vertex-ai.js
```

é¢„æœŸè¾“å‡ºï¼ˆæœªé…ç½®æ—¶ï¼‰ï¼š
```
âŒ Image Edit API Error: Vertex AI is not configured. Please set GOOGLE_CLOUD_PROJECT and GOOGLE_SERVICE_ACCOUNT_KEY environment variables.
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Vertex AI æœªé…ç½®é”™è¯¯**
   - ç¡®ä¿è®¾ç½®äº† `GOOGLE_CLOUD_PROJECT` ç¯å¢ƒå˜é‡
   - ç¡®ä¿è®¾ç½®äº† `GOOGLE_SERVICE_ACCOUNT_KEY` ç¯å¢ƒå˜é‡
   - éªŒè¯æœåŠ¡è´¦å·æœ‰è¶³å¤Ÿçš„æƒé™

2. **å›¾åƒä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥å›¾åƒæ ¼å¼æ˜¯å¦æ”¯æŒï¼ˆJPEG, PNG, WebPï¼‰
   - ç¡®è®¤å›¾åƒå¤§å°ä¸è¶…è¿‡é™åˆ¶

3. **ç”»å¸ƒæ“ä½œé—®é¢˜**
   - åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½ç”»å¸ƒ
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

## ğŸ”— ç›¸å…³é“¾æ¥

- [Google Vertex AI æ–‡æ¡£](https://cloud.google.com/vertex-ai/docs)
- [Vercel Serverless Functions æ–‡æ¡£](https://vercel.com/docs/functions)
- [Fabric.js æ–‡æ¡£](http://fabricjs.com/)
- [Vercel API Routes æ–‡æ¡£](https://vercel.com/docs/functions/serverless-functions)
- [Vercel éƒ¨ç½²æ–‡æ¡£](https://vercel.com/docs)
